<% include ./partials/header.ejs %>

    <div class="profile w-full min-h-screen bg-gray-300">
        <form id="uploadForm" action="/upload" enctype="multipart/form-data" method="post" hidden>
            <input type="file" name="image">
        </form>
        <div class="flex justify-center pt-3">
            <div class="profileDetails bg-gray-100 w-[50vw] h-[70vh] flex flex-col justify-center items-center rounded-2xl border-2 border-red-500">
                <hr class="h-.5 w-[48vw] bg-gray-500 m-3">
                <div class="relative">
                    <span id="uploadIcon" class="w-9 h-8 absolute bottom-0 right-0 rounded-full hover:scale-125 transition-all">
                        <i class=" fa-solid fa-pen-to-square"></i>
                    </span>
                    <div class="w-[11rem] h-[11rem] bg-red-500 flex justify-center items-center rounded-full shadow-xl">
                        <img class="w-40 h-40 rounded-full" src="./images/uploads/<%= user.profileImage %>" alt="Profile">
                    </div>
                </div>
                <h1 class="text-2xl font-semibold "> <%= user.fullname %> </h1>
                <h3 class="text-lg"><span class="font-bold">User_ID:</span> @<%= user.username %> </h3>
                <h3 class="text-lg"><span class="font-bold">Email_ID:</span> <%= user.email %> </h3>
                <h3 class="text-lg">732K Followers || 21 Following</h3> 
                <div class="flex gap-10">
                    <a href="#" class="px-10 py-3 bg-red-500 rounded-full mt-3">Edit Profile</a>
                    <a href="/add" class="px-10 py-3 bg-red-500 rounded-full mt-3">Add a Post</a>
                </div>
                <hr class="h-.5 w-[48vw] bg-gray-500 m-3">
            </div>
        </div>

        <div class="pl-14 py-8 bg-gray-100 mx-20 my-3 rounded-2xl">
            <h1 class="text-center text-3xl tracking-[.5em] pb-3">MY POSTS</h1>
            <hr class="w-[78rem] py-2.5">
            <div class="grid grid-cols-4 gap-10">
                <% user.postID.forEach(function(post){ %>
                    <div class="card w-[15rem] shadow-xl shadow-red-500">
                        <img src="./images/uploads/<%= post.image %>" class="card-img-top" alt="...">
                        <div class="card-body text-center">
                            <h3 class="text-xl font-bold"> <%= post.title %> </h3>
                          <p class="card-text"> <%= post.description %> </p>
                        </div>
                    </div>
                <% }) %>
            </div>
        </div>
    </div>

    <script>
        document.querySelector('#uploadIcon').addEventListener('click',function(){
            document.querySelector('#uploadForm input').click();
        });

        document.querySelector('#uploadForm input').addEventListener('change',function(){
            document.querySelector('#uploadForm').submit();
        })
    </script>


<% include ./partials/footer.ejs %>
